{
    "author" : "Samael Cui <crazyasp@gmail.com>",
    "to" : [ "hibernate-announce@lists.jboss.org" ],
    "subject_original" : "[hibernate-announce] a question to use <any> tag",
    "subject" : "a question to use <any> tag",
    "date" : "2007-03-26T04:11:10.000Z",
    "message_id_original" : "<ae70f1fe0703252111k18f5bcfdgc3d267c668d8696c@mail.gmail.com>",
    "message_id" : "<ae70f1fe0703252111k18f5bcfdgc3d267c668d8696c@mail.gmail.com>",
    "message_snippet" : "a question to use &lt;any&gt; tag Hibernate version: 3.0 Mapping documents: &lt;?xml version=\"1.0\"?&gt; &lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD//EN\" \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt; &l",
    "first_text_message" : "a question to use &lt;any&gt; tag\n\n\n\nHibernate version:\n3.0\nMapping documents:\n\n&lt;?xml version=\"1.0\"?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD//EN\"\n\"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;\n&lt;hibernate-mapping package=\"com.crazyasp.testany\"&gt;\n&lt;class name=\"TestAnyA\" table=\"TestAnyA\" polymorphism=\"implicit\"&gt;\n&lt;id name=\"id\" type=\"integer\" column=\"id\"&gt;\n&lt;generator class=\"native\"/&gt;\n&lt;/id&gt;\n&lt;set name=\"c\" inverse=\"true\"&gt;\n&lt;key&gt;\n&lt;column name=\"ownerId\"/&gt;\n&lt;/key&gt;\n&lt;one-to-many class=\"com.crazyasp.testany.TestAnyC\"/&gt;\n&lt;/set&gt;\n&lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n\n&lt;?xml version=\"1.0\"?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD//EN\"\n\"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;\n&lt;hibernate-mapping package=\"com.crazyasp.testany\"&gt;\n&lt;class name=\"TestAnyB\" table=\"TestAnyB\" polymorphism=\"implicit\"&gt;\n&lt;id name=\"id\" type=\"integer\" column=\"id\"&gt;\n&lt;generator class=\"native\"/&gt;\n&lt;/id&gt;\n&lt;set name=\"c\" cascade=\"delete\" inverse=\"true\"&gt;\n&lt;key&gt;\n&lt;column name=\"ownerId\"/&gt;\n&lt;/key&gt;\n&lt;one-to-many class=\"com.crazyasp.testany.TestAnyC\"/&gt;\n&lt;/set&gt;\n&lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n\n&lt;?xml version=\"1.0\"?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD//EN\"\n\"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;\n&lt;hibernate-mapping package=\"com.crazyasp.testany\"&gt;\n&lt;class name=\"TestAnyC\" table=\"TestAnyC\" polymorphism=\"implicit\"&gt;\n&lt;id name=\"id\" type=\"integer\" column=\"id\"&gt;\n&lt;generator class=\"native\"/&gt;\n&lt;/id&gt;\n&lt;any name=\"owner\" meta-type=\"string\" id-type=\"integer\"&gt;\n&lt;meta-value value=\"a\" class=\"com.crazyasp.testany.TestAnyA\"/&gt;\n&lt;meta-value value=\"b\" class=\"com.crazyasp.testany.TestAnyB\"/&gt;\n&lt;column name=\"ownerType\"/&gt;\n&lt;column name=\"ownerId\" not-null=\"false\"/&gt;\n&lt;/any&gt;\n&lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n\n\nCode between sessionFactory.openSession() and session.close():\n\nFull stack trace of any exception that occurs:\n\nName and version of the database you are using:\npostgresql 8.0\nThe generated SQL (show_sql=true):\nHibernate: select nextval ('hibernate_sequence')\nHibernate: insert into TestAnyC (ownerType, ownerId, id) values (?, ?, ?)\nDebug level Hibernate log excerpt:\n\n2007-03-23 10:48:53,603 [main] WARN\norg.hibernate.util.JDBCExceptionReporter - SQL Error: 0, SQLState: null\n2007-03-23 10:48:53,605 [main] ERROR\norg.hibernate.util.JDBCExceptionReporter - 批次处理0insert into TestAnyC\n(ownerType, ownerId, id) values (a, 1, 3)失败，调用getNextException查看原因。\n2007-03-23 10:48:53,606 [main] WARN\norg.hibernate.util.JDBCExceptionReporter - SQL Error: 0, SQLState: 23503\n2007-03-23 10:48:53,607 [main] ERROR\norg.hibernate.util.JDBCExceptionReporter - 错误: 插入或更新表 \"testanyc\" 违反外键约束\n\"fkbf7747a9ff594b5e\"\n   Detail: Key (ownerid)=(1) is not present in table \"testanyb\".\n2007-03-23 10:48:53,633 [main] ERROR\norg.hibernate.event.def.AbstractFlushingEventListener - Could not\nsynchronize database state with session\norg.hibernate.exception.ConstraintViolationException: Could not execute JDBC\nbatch update\n",
    "first_text_message_without_quotes" : "a question to use &lt;any&gt; tag Hibernate version: 3.0 Mapping documents: &lt;?xml version=\"1.0\"?&gt; &lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD//EN\" \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt; &lt;hibernate-mapping package=\"com.crazyasp.testany\"&gt; &lt;class name=\"TestAnyA\" table=\"TestAnyA\" polymorphism=\"implicit\"&gt; &lt;id name=\"id\" type=\"integer\" column=\"id\"&gt; &lt;generator class=\"native\"/&gt; &lt;/id&gt; &lt;set name=\"c\" inverse=\"true\"&gt; &lt;key&gt; &lt;column name=\"ownerId\"/&gt; &lt;/key&gt; &lt;one-to-many class=\"com.crazyasp.testany.TestAnyC\"/&gt; &lt;/set&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; &lt;?xml version=\"1.0\"?&gt; &lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD//EN\" \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt; &lt;hibernate-mapping package=\"com.crazyasp.testany\"&gt; &lt;class name=\"TestAnyB\" table=\"TestAnyB\" polymorphism=\"implicit\"&gt; &lt;id name=\"id\" type=\"integer\" column=\"id\"&gt; &lt;generator class=\"native\"/&gt; &lt;/id&gt; &lt;set name=\"c\" cascade=\"delete\" inverse=\"true\"&gt; &lt;key&gt; &lt;column name=\"ownerId\"/&gt; &lt;/key&gt; &lt;one-to-many class=\"com.crazyasp.testany.TestAnyC\"/&gt; &lt;/set&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; &lt;?xml version=\"1.0\"?&gt; &lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD//EN\" \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt; &lt;hibernate-mapping package=\"com.crazyasp.testany\"&gt; &lt;class name=\"TestAnyC\" table=\"TestAnyC\" polymorphism=\"implicit\"&gt; &lt;id name=\"id\" type=\"integer\" column=\"id\"&gt; &lt;generator class=\"native\"/&gt; &lt;/id&gt; &lt;any name=\"owner\" meta-type=\"string\" id-type=\"integer\"&gt; &lt;meta-value value=\"a\" class=\"com.crazyasp.testany.TestAnyA\"/&gt; &lt;meta-value value=\"b\" class=\"com.crazyasp.testany.TestAnyB\"/&gt; &lt;column name=\"ownerType\"/&gt; &lt;column name=\"ownerId\" not-null=\"false\"/&gt; &lt;/any&gt; &lt;/class&gt; &lt;/hibernate-mapping&gt; Code between sessionFactory.openSession() and session.close(): Full stack trace of any exception that occurs: Name and version of the database you are using: postgresql 8.0 The generated SQL (show_sql=true): Hibernate: select nextval ('hibernate_sequence') Hibernate: insert into TestAnyC (ownerType, ownerId, id) values (?, ?, ?) Debug level Hibernate log excerpt: 2007-03-23 10:48:53,603 [main] WARN org.hibernate.util.JDBCExceptionReporter - SQL Error: 0, SQLState: null 2007-03-23 10:48:53,605 [main] ERROR org.hibernate.util.JDBCExceptionReporter - 批次处理0insert into TestAnyC (ownerType, ownerId, id) values (a, 1, 3)失败，调用getNextException查看原因。 2007-03-23 10:48:53,606 [main] WARN org.hibernate.util.JDBCExceptionReporter - SQL Error: 0, SQLState: 23503 2007-03-23 10:48:53,607 [main] ERROR org.hibernate.util.JDBCExceptionReporter - 错误: 插入或更新表 \"testanyc\" 违反外键约束 \"fkbf7747a9ff594b5e\" Detail: Key (ownerid)=(1) is not present in table \"testanyb\". 2007-03-23 10:48:53,633 [main] ERROR org.hibernate.event.def.AbstractFlushingEventListener - Could not synchronize database state with session org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update",
    "text_messages_cnt" : 0,
    "html_messages_cnt" : 0,
    "message_attachments_cnt" : 0
}