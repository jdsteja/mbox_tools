{
    "author_name" : "Samael Cui",
    "author_email" : "crazyasp@gmail.com",
    "to" : [ "hibernate-announce@lists.jboss.org" ],
    "subject_original" : "[hibernate-announce] a question to use <any> tag",
    "subject" : "a question to use <any> tag",
    "date" : "2007-03-26T04:11:10.000Z",
    "message_id_original" : "<ae70f1fe0703252111k18f5bcfdgc3d267c668d8696c@mail.gmail.com>",
    "message_id" : "<ae70f1fe0703252111k18f5bcfdgc3d267c668d8696c@mail.gmail.com>",
    "message_snippet" : "a question to use <any> tag Hibernate version: 3.0 Mapping documents: <?xml version=\"1.0\"?> <!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD//EN\" \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"> <hibernate-mapping p",
    "first_text_message" : "a question to use <any> tag\n\n\n\nHibernate version:\n3.0\nMapping documents:\n\n<?xml version=\"1.0\"?>\n<!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD//EN\"\n\"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\">\n<hibernate-mapping package=\"com.crazyasp.testany\">\n<class name=\"TestAnyA\" table=\"TestAnyA\" polymorphism=\"implicit\">\n<id name=\"id\" type=\"integer\" column=\"id\">\n<generator class=\"native\"/>\n</id>\n<set name=\"c\" inverse=\"true\">\n<key>\n<column name=\"ownerId\"/>\n</key>\n<one-to-many class=\"com.crazyasp.testany.TestAnyC\"/>\n</set>\n</class>\n</hibernate-mapping>\n\n<?xml version=\"1.0\"?>\n<!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD//EN\"\n\"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\">\n<hibernate-mapping package=\"com.crazyasp.testany\">\n<class name=\"TestAnyB\" table=\"TestAnyB\" polymorphism=\"implicit\">\n<id name=\"id\" type=\"integer\" column=\"id\">\n<generator class=\"native\"/>\n</id>\n<set name=\"c\" cascade=\"delete\" inverse=\"true\">\n<key>\n<column name=\"ownerId\"/>\n</key>\n<one-to-many class=\"com.crazyasp.testany.TestAnyC\"/>\n</set>\n</class>\n</hibernate-mapping>\n\n<?xml version=\"1.0\"?>\n<!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD//EN\"\n\"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\">\n<hibernate-mapping package=\"com.crazyasp.testany\">\n<class name=\"TestAnyC\" table=\"TestAnyC\" polymorphism=\"implicit\">\n<id name=\"id\" type=\"integer\" column=\"id\">\n<generator class=\"native\"/>\n</id>\n<any name=\"owner\" meta-type=\"string\" id-type=\"integer\">\n<meta-value value=\"a\" class=\"com.crazyasp.testany.TestAnyA\"/>\n<meta-value value=\"b\" class=\"com.crazyasp.testany.TestAnyB\"/>\n<column name=\"ownerType\"/>\n<column name=\"ownerId\" not-null=\"false\"/>\n</any>\n</class>\n</hibernate-mapping>\n\n\nCode between sessionFactory.openSession() and session.close():\n\nFull stack trace of any exception that occurs:\n\nName and version of the database you are using:\npostgresql 8.0\nThe generated SQL (show_sql=true):\nHibernate: select nextval ('hibernate_sequence')\nHibernate: insert into TestAnyC (ownerType, ownerId, id) values (?, ?, ?)\nDebug level Hibernate log excerpt:\n\n2007-03-23 10:48:53,603 [main] WARN\norg.hibernate.util.JDBCExceptionReporter - SQL Error: 0, SQLState: null\n2007-03-23 10:48:53,605 [main] ERROR\norg.hibernate.util.JDBCExceptionReporter - 批次处理0insert into TestAnyC\n(ownerType, ownerId, id) values (a, 1, 3)失败，调用getNextException查看原因。\n2007-03-23 10:48:53,606 [main] WARN\norg.hibernate.util.JDBCExceptionReporter - SQL Error: 0, SQLState: 23503\n2007-03-23 10:48:53,607 [main] ERROR\norg.hibernate.util.JDBCExceptionReporter - 错误: 插入或更新表 \"testanyc\" 违反外键约束\n\"fkbf7747a9ff594b5e\"\n   Detail: Key (ownerid)=(1) is not present in table \"testanyb\".\n2007-03-23 10:48:53,633 [main] ERROR\norg.hibernate.event.def.AbstractFlushingEventListener - Could not\nsynchronize database state with session\norg.hibernate.exception.ConstraintViolationException: Could not execute JDBC\nbatch update\n",
    "first_text_message_without_quotes" : "a question to use <any> tag Hibernate version: 3.0 Mapping documents: <?xml version=\"1.0\"?> <!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD//EN\" \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"> <hibernate-mapping package=\"com.crazyasp.testany\"> <class name=\"TestAnyA\" table=\"TestAnyA\" polymorphism=\"implicit\"> <id name=\"id\" type=\"integer\" column=\"id\"> <generator class=\"native\"/> </id> <set name=\"c\" inverse=\"true\"> <key> <column name=\"ownerId\"/> </key> <one-to-many class=\"com.crazyasp.testany.TestAnyC\"/> </set> </class> </hibernate-mapping> <?xml version=\"1.0\"?> <!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD//EN\" \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"> <hibernate-mapping package=\"com.crazyasp.testany\"> <class name=\"TestAnyB\" table=\"TestAnyB\" polymorphism=\"implicit\"> <id name=\"id\" type=\"integer\" column=\"id\"> <generator class=\"native\"/> </id> <set name=\"c\" cascade=\"delete\" inverse=\"true\"> <key> <column name=\"ownerId\"/> </key> <one-to-many class=\"com.crazyasp.testany.TestAnyC\"/> </set> </class> </hibernate-mapping> <?xml version=\"1.0\"?> <!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD//EN\" \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"> <hibernate-mapping package=\"com.crazyasp.testany\"> <class name=\"TestAnyC\" table=\"TestAnyC\" polymorphism=\"implicit\"> <id name=\"id\" type=\"integer\" column=\"id\"> <generator class=\"native\"/> </id> <any name=\"owner\" meta-type=\"string\" id-type=\"integer\"> <meta-value value=\"a\" class=\"com.crazyasp.testany.TestAnyA\"/> <meta-value value=\"b\" class=\"com.crazyasp.testany.TestAnyB\"/> <column name=\"ownerType\"/> <column name=\"ownerId\" not-null=\"false\"/> </any> </class> </hibernate-mapping> Code between sessionFactory.openSession() and session.close(): Full stack trace of any exception that occurs: Name and version of the database you are using: postgresql 8.0 The generated SQL (show_sql=true): Hibernate: select nextval ('hibernate_sequence') Hibernate: insert into TestAnyC (ownerType, ownerId, id) values (?, ?, ?) Debug level Hibernate log excerpt: 2007-03-23 10:48:53,603 [main] WARN org.hibernate.util.JDBCExceptionReporter - SQL Error: 0, SQLState: null 2007-03-23 10:48:53,605 [main] ERROR org.hibernate.util.JDBCExceptionReporter - 批次处理0insert into TestAnyC (ownerType, ownerId, id) values (a, 1, 3)失败，调用getNextException查看原因。 2007-03-23 10:48:53,606 [main] WARN org.hibernate.util.JDBCExceptionReporter - SQL Error: 0, SQLState: 23503 2007-03-23 10:48:53,607 [main] ERROR org.hibernate.util.JDBCExceptionReporter - 错误: 插入或更新表 \"testanyc\" 违反外键约束 \"fkbf7747a9ff594b5e\" Detail: Key (ownerid)=(1) is not present in table \"testanyb\". 2007-03-23 10:48:53,633 [main] ERROR org.hibernate.event.def.AbstractFlushingEventListener - Could not synchronize database state with session org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update",
    "text_messages_cnt" : 0,
    "html_messages_cnt" : 0,
    "message_attachments_cnt" : 0
}